# DepositæŒ‰é’®ä¿®å¤æ€»ç»“

## é—®é¢˜æè¿°
ç”¨æˆ·æŠ¥å‘Šï¼šåœ¨Deposité¡µé¢ä¸­ï¼Œè¾“å…¥Amount (USD)ï¼Œé€‰æ‹©Payment Methodåï¼Œ"Deposits & mint USDE"æŒ‰é’®æ— æ³•ç‚¹å‡»ã€‚

## é—®é¢˜åˆ†æ

### 1. åç«¯APIçŠ¶æ€
âœ… **æ‰€æœ‰APIéƒ½æ­£å¸¸å·¥ä½œ**ï¼š
- KYCçŠ¶æ€ï¼š`"approved"`
- æŒ‰é’®ç¦ç”¨é€»è¾‘ï¼š`false`ï¼ˆåº”è¯¥å¯ç”¨ï¼‰
- é™é¢æ£€æŸ¥ï¼šåœ¨é™é¢å†…
- APIè°ƒç”¨ï¼šæˆåŠŸ

### 2. å‰ç«¯ä¿®å¤å†…å®¹

#### ä¿®å¤å‰çš„é—®é¢˜ï¼š
```javascript
// é”™è¯¯çš„æŒ‰é’®ç¦ç”¨é€»è¾‘
disabled={loading || (usdeData?.data?.kycStatus !== 'approved' && usdeData?.kycStatus !== 'approved') || !register('amount').value}
```

#### ä¿®å¤åçš„é€»è¾‘ï¼š
```javascript
// æ­£ç¡®çš„æŒ‰é’®ç¦ç”¨é€»è¾‘
disabled={loading || (usdeData?.data?.kycStatus !== 'approved' && usdeData?.kycStatus !== 'approved')}
```

#### ä¿®å¤çš„å…·ä½“é—®é¢˜ï¼š
1. **ç§»é™¤äº†é”™è¯¯çš„è¡¨å•å€¼æ£€æŸ¥** - `!register('amount').value` ä¸ä¼šæ­£ç¡®å·¥ä½œ
2. **ä¿®å¤äº†é™é¢æ£€æŸ¥è·¯å¾„** - ä» `usdeData?.limits` æ”¹ä¸º `usdeData?.data?.limits`
3. **æ·»åŠ äº†è°ƒè¯•æ—¥å¿—** - åœ¨æŒ‰é’®ç‚¹å‡»æ—¶è¾“å‡ºçŠ¶æ€ä¿¡æ¯

## ä¿®å¤çš„æ–‡ä»¶

### 1. `frontend/src/pages/Deposits.js`
- **æŒ‰é’®ç¦ç”¨é€»è¾‘**ï¼šç§»é™¤äº†é”™è¯¯çš„ `!register('amount').value` æ£€æŸ¥
- **é™é¢æ£€æŸ¥**ï¼šä¿®å¤äº†æ•°æ®è·¯å¾„ `usdeData?.data?.limits?.daily?.remaining`
- **è°ƒè¯•æ—¥å¿—**ï¼šæ·»åŠ äº†æŒ‰é’®ç‚¹å‡»æ—¶çš„çŠ¶æ€è¾“å‡º

### 2. è°ƒè¯•è„šæœ¬
- `test-button-state.js` - æµ‹è¯•æŒ‰é’®çŠ¶æ€
- `debug-frontend-state.js` - è¯¦ç»†çš„å‰ç«¯çŠ¶æ€è°ƒè¯•

## æµ‹è¯•ç»“æœ

### APIæµ‹è¯•ç»“æœï¼š
```javascript
// KYCçŠ¶æ€æ£€æŸ¥
- usdeData.kycStatus: undefined
- usdeData.data.kycStatus: approved
- usdeData.data?.kycStatus: approved

// æŒ‰é’®çŠ¶æ€æ£€æŸ¥
- loading: false
- isKycApproved: true
- isButtonDisabled: false

// é™é¢æ£€æŸ¥
- dailyRemaining: 10000
- testAmount: 100
- isWithinLimit: true
```

### ä¿®å¤éªŒè¯ï¼š
1. âœ… **KYCçŠ¶æ€æ­£ç¡®è¯†åˆ«** - APIè¿”å› `"approved"`
2. âœ… **æŒ‰é’®ç¦ç”¨é€»è¾‘ä¿®å¤** - ç§»é™¤äº†é”™è¯¯çš„è¡¨å•å€¼æ£€æŸ¥
3. âœ… **é™é¢æ£€æŸ¥ä¿®å¤** - ä½¿ç”¨æ­£ç¡®çš„æ•°æ®è·¯å¾„
4. âœ… **APIè°ƒç”¨æˆåŠŸ** - åˆ›å»ºæ”¯ä»˜ä¼šè¯æ­£å¸¸
5. âœ… **è°ƒè¯•æ—¥å¿—æ·»åŠ ** - ä¾¿äºé—®é¢˜æ’æŸ¥

## å¯èƒ½çš„å‰ç«¯é—®é¢˜

å¦‚æœæŒ‰é’®ä»ç„¶æ— æ³•ç‚¹å‡»ï¼Œå¯èƒ½çš„åŸå› ï¼š

### 1. æµè§ˆå™¨ç¼“å­˜é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- å¼ºåˆ¶åˆ·æ–°é¡µé¢ (Ctrl+F5 æˆ– Cmd+Shift+R)
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### 2. ReactçŠ¶æ€æ›´æ–°é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ `usdeData` çŠ¶æ€æ˜¯å¦æ­£ç¡®æ›´æ–°
- æ£€æŸ¥ `loading` çŠ¶æ€æ˜¯å¦æ­£ç¡®é‡ç½®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„è°ƒè¯•æ—¥å¿—

### 3. CSSæ ·å¼é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥æŒ‰é’®çš„CSSç±»æ˜¯å¦æ­£ç¡®åº”ç”¨
- æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–CSSè§„åˆ™è¦†ç›–äº†æŒ‰é’®æ ·å¼
- æ£€æŸ¥ `disabled` å±æ€§æ˜¯å¦æ­£ç¡®è®¾ç½®

## è°ƒè¯•æ­¥éª¤

### 1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹Consoleæ ‡ç­¾é¡µï¼š
```
ğŸ” æŒ‰é’®ç‚¹å‡»è°ƒè¯•:
- loading: false
- usdeData?.data?.kycStatus: approved
- usdeData?.kycStatus: undefined
- æŒ‰é’®ç¦ç”¨çŠ¶æ€: false
```

### 2. æ£€æŸ¥ç½‘ç»œè¯·æ±‚
åœ¨Networkæ ‡ç­¾é¡µä¸­æŸ¥çœ‹APIè¯·æ±‚ï¼š
- `/api/deposit/usde-balance` - åº”è¯¥è¿”å›æ­£ç¡®çš„KYCçŠ¶æ€
- `/api/deposit/create-session` - åº”è¯¥æˆåŠŸåˆ›å»ºæ”¯ä»˜ä¼šè¯

### 3. æ£€æŸ¥ReactçŠ¶æ€
åœ¨Reactå¼€å‘è€…å·¥å…·ä¸­æ£€æŸ¥ç»„ä»¶çŠ¶æ€ï¼š
- `usdeData` å¯¹è±¡çš„ç»“æ„
- `loading` çŠ¶æ€çš„å€¼
- æŒ‰é’®çš„ `disabled` å±æ€§

## ä½¿ç”¨è¯´æ˜

ç°åœ¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡­æ®æ­£å¸¸ä½¿ç”¨DepositåŠŸèƒ½ï¼š
- **é‚®ç®±**: `demo@usde.com`
- **å¯†ç **: `demo123`

Deposité¡µé¢ç°åœ¨åº”è¯¥ï¼š
- âœ… æ­£ç¡®æ˜¾ç¤ºKYCçŠ¶æ€ï¼ˆå·²æ‰¹å‡†ï¼‰
- âœ… æŒ‰é’®å¯ä»¥æ­£å¸¸ç‚¹å‡»
- âœ… è¾“å…¥é‡‘é¢åå¯ä»¥æäº¤
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„è°ƒè¯•æ—¥å¿—

## å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨

å¦‚æœæŒ‰é’®ä»ç„¶æ— æ³•ç‚¹å‡»ï¼Œè¯·ï¼š

1. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°** - æŸ¥çœ‹æ˜¯å¦æœ‰JavaScripté”™è¯¯
2. **æ£€æŸ¥ç½‘ç»œè¯·æ±‚** - ç¡®è®¤APIè°ƒç”¨æ˜¯å¦æˆåŠŸ
3. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜** - å¼ºåˆ¶åˆ·æ–°é¡µé¢
4. **æŸ¥çœ‹è°ƒè¯•æ—¥å¿—** - æ£€æŸ¥æŒ‰é’®ç‚¹å‡»æ—¶çš„çŠ¶æ€è¾“å‡º

æ‰€æœ‰åç«¯é€»è¾‘éƒ½å·²ä¿®å¤ï¼Œå¦‚æœå‰ç«¯ä»æœ‰é—®é¢˜ï¼Œå¯èƒ½æ˜¯æµè§ˆå™¨ç¼“å­˜æˆ–ReactçŠ¶æ€æ›´æ–°é—®é¢˜ã€‚

